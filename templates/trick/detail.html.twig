{% extends 'base.html.twig' %}

{% block title %}
	{{ trick.name }}
{% endblock %}

{% block body %}

	<div class='container my-5'>
		<div class='row'>

			<div class="col">
				<h2 class="text-center h2 mb-3 font-weight-normal">
					{{ trick.name }}</h2>
			</div>

			{% if app.user %}

				<div class="col">
					<a href="{{ path('app_trick_edit', {slug: trick.slug}) }}">
						<i class="bi bi-pencil-fill"></i>
					</a>
				</div>
				<div class="col">
					<a href="{{ path('app_trick_delete', {slug: trick.slug}) }}">
						<i class="bi bi-trash-fill"></i>
					</a>
				</div>

			{% endif %}
		</div>
		<div class="col-lg-8 mx-auto">
			<small>
				Le
				{{ trick.createdAt | date('d/m/Y H:i') }}
				: {{ trick.user.pseudo }}</small>
			<p>{{ trick.category.name }}</p>
			<p>
				{{ trick.content }}
			</p>

		</div>

		<div class="form-group row">
			<div class"col">
				<div class="col-lg-8 mx-auto">
					<h5>Liste de commentaires</h5>
					{% for comment in trick.comments %}

						<p>Publie par: {{ comment.user.pseudo }} le
							{{ comment.createdAt | date('d/m/Y H:i') }}
						</p>
						<p>
							{{ comment.message }}
						</p>

					{% endfor %}
				</div>
				{% if app.user %}

					<div class="col-lg-8 mx-auto">
						<h5>Ajouter un commentaire</h5>

						{{ form_start(commentForm) }}

						<div class="mb-3">
							{{ form(commentForm.message) }}
							</div>

							<div class="d-grid gap-2 d-md-flex justify-content-md-end">
								<button type="submit" class="btn btn-xs btn-primary" style="background-color: #45637d;">Envoyer</button>
							</div>

							{{ form_end(commentForm) }}
						</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
{% endblock %}
